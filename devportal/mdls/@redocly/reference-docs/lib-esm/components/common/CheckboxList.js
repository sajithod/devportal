import{__extends,__makeTemplateObject,__spreadArray}from"tslib";import React from"react";import{styled}from"../../redoc-lib";import{asField}from"informed";import{FormError}from"./form";import{Checkbox}from"./Checkbox";import{SampleControls,SamplesControlButton}from"../../redoc-lib/src/common-elements";var DEFAULT_MAX_ITEMS=11,CheckboxListComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:{collapsed:!0}}),t}return __extends(t,e),Object.defineProperty(t.prototype,"onCheckBoxClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.target.value,l=e.target.checked;this.props.fieldApi.setTouched(!0);var r,o=this.props.fieldApi.getValue()||[];if(l)r=__spreadArray(__spreadArray([],o,!0),[t],!1);else{var a=o.indexOf(t);r=__spreadArray(__spreadArray([],o.slice(0,a),!0),o.slice(a+1),!0)}this.props.fieldApi.setValue(r)}}),Object.defineProperty(t.prototype,"isFieldChecked",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.props.fieldApi.getValue().includes(e)}}),Object.defineProperty(t.prototype,"toggle",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setState({collapsed:!this.state.collapsed})}}),Object.defineProperty(t.prototype,"selectAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.props.fieldApi.setValue(this.props.items)}}),Object.defineProperty(t.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.props.fieldApi.setValue([])}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.props,l=t.items,r=t.fieldApi,o=t.validateOnChange,a=t.maxDisplayedItems,n=t.showControls,i=t.trimItemsLength,c=this.state.collapsed,p=r.getError(),s=a||DEFAULT_MAX_ITEMS,m=i&&this.state.collapsed?l.slice(0,s):l;return React.createElement("div",null,n?React.createElement(ControlButtonsWrapper,null,React.createElement(SamplesControlButton,{onClick:function(){e.selectAll()}},"Select all"),React.createElement(SamplesControlButton,{onClick:function(){e.clearAll()}},"Clear")):null,React.createElement("div",null,m.map((function(t){return React.createElement(Checkbox,{nowrap:!0,id:t,value:t,checked:e.isFieldChecked(t),label:t,key:t,onChange:function(t){e.onCheckBoxClick(t),o&&r.validate()}})})),l.length>s&&i?React.createElement(ToggleButton,{onClick:function(){e.toggle()}},c?"Show all":"Collapse"):null),p?React.createElement(FormError,null,p):"")}}),t}(React.Component);export{CheckboxListComponent};export var CheckboxList=asField(CheckboxListComponent);var templateObject_1,templateObject_2,ControlButtonsWrapper=styled(SampleControls)(templateObject_1||(templateObject_1=__makeTemplateObject(["\n  opacity: 1;\n  text-align: left;\n"],["\n  opacity: 1;\n  text-align: left;\n"]))),ToggleButton=styled(SamplesControlButton)(templateObject_2||(templateObject_2=__makeTemplateObject(["\n  float: right;\n"],["\n  float: right;\n"])));
//# sourceMappingURL=CheckboxList.js.map