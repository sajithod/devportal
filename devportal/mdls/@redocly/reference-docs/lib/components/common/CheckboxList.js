"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckboxList=exports.CheckboxListComponent=void 0;var tslib_1=require("tslib"),react_1=(0,tslib_1.__importDefault)(require("react")),redoc_lib_1=require("../../redoc-lib"),informed_1=require("informed"),form_1=require("./form"),Checkbox_1=require("./Checkbox"),common_elements_1=require("../../redoc-lib/src/common-elements"),DEFAULT_MAX_ITEMS=11,CheckboxListComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:{collapsed:!0}}),t}return(0,tslib_1.__extends)(t,e),Object.defineProperty(t.prototype,"onCheckBoxClick",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e.target.value,l=e.target.checked;this.props.fieldApi.setTouched(!0);var r,o=this.props.fieldApi.getValue()||[];if(l)r=(0,tslib_1.__spreadArray)((0,tslib_1.__spreadArray)([],o,!0),[t],!1);else{var n=o.indexOf(t);r=(0,tslib_1.__spreadArray)((0,tslib_1.__spreadArray)([],o.slice(0,n),!0),o.slice(n+1),!0)}this.props.fieldApi.setValue(r)}}),Object.defineProperty(t.prototype,"isFieldChecked",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.props.fieldApi.getValue().includes(e)}}),Object.defineProperty(t.prototype,"toggle",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.setState({collapsed:!this.state.collapsed})}}),Object.defineProperty(t.prototype,"selectAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.props.fieldApi.setValue(this.props.items)}}),Object.defineProperty(t.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.props.fieldApi.setValue([])}}),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=this.props,l=t.items,r=t.fieldApi,o=t.validateOnChange,n=t.maxDisplayedItems,a=t.showControls,i=t.trimItemsLength,c=this.state.collapsed,s=r.getError(),p=n||DEFAULT_MAX_ITEMS,u=i&&this.state.collapsed?l.slice(0,p):l;return react_1.default.createElement("div",null,a?react_1.default.createElement(ControlButtonsWrapper,null,react_1.default.createElement(common_elements_1.SamplesControlButton,{onClick:function(){e.selectAll()}},"Select all"),react_1.default.createElement(common_elements_1.SamplesControlButton,{onClick:function(){e.clearAll()}},"Clear")):null,react_1.default.createElement("div",null,u.map((function(t){return react_1.default.createElement(Checkbox_1.Checkbox,{nowrap:!0,id:t,value:t,checked:e.isFieldChecked(t),label:t,key:t,onChange:function(t){e.onCheckBoxClick(t),o&&r.validate()}})})),l.length>p&&i?react_1.default.createElement(ToggleButton,{onClick:function(){e.toggle()}},c?"Show all":"Collapse"):null),s?react_1.default.createElement(form_1.FormError,null,s):"")}}),t}(react_1.default.Component);exports.CheckboxListComponent=CheckboxListComponent,exports.CheckboxList=(0,informed_1.asField)(CheckboxListComponent);var templateObject_1,templateObject_2,ControlButtonsWrapper=(0,redoc_lib_1.styled)(common_elements_1.SampleControls)(templateObject_1||(templateObject_1=(0,tslib_1.__makeTemplateObject)(["\n  opacity: 1;\n  text-align: left;\n"],["\n  opacity: 1;\n  text-align: left;\n"]))),ToggleButton=(0,redoc_lib_1.styled)(common_elements_1.SamplesControlButton)(templateObject_2||(templateObject_2=(0,tslib_1.__makeTemplateObject)(["\n  float: right;\n"],["\n  float: right;\n"])));
//# sourceMappingURL=CheckboxList.js.map