"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExampleModel=void 0;var url_1=require("url"),utils_1=require("../../utils"),externalExamplesCache={},ExampleModel=function(){function e(e,r,t,l){Object.defineProperty(this,"mime",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"summary",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"externalValueUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0});var a=e.deref(r);this.value=a.value,this.summary=a.summary,this.description=a.description,a.externalValue&&(this.externalValueUrl=(0,url_1.resolve)(e.definitionUrl||"",a.externalValue)),e.exitRef(r),(0,utils_1.isFormUrlEncoded)(t)&&this.value&&"object"==typeof this.value&&(this.value=(0,utils_1.urlFormEncodePayload)(this.value,l))}return Object.defineProperty(e.prototype,"getExternalValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.externalValueUrl?(this.externalValueUrl in externalExamplesCache||(externalExamplesCache[this.externalValueUrl]=fetch(this.externalValueUrl).then((function(r){return r.text().then((function(t){if(!r.ok)return Promise.reject(new Error(t));if(!(0,utils_1.isJsonLike)(e))return t;try{return JSON.parse(t)}catch(e){return t}}))}))),externalExamplesCache[this.externalValueUrl]):Promise.resolve(void 0)}}),e}();exports.ExampleModel=ExampleModel;
//# sourceMappingURL=Example.js.map