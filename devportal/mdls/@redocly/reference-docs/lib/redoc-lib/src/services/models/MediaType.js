"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaTypeModel=void 0;var tslib_1=require("tslib"),Sampler=(0,tslib_1.__importStar)(require("openapi-sampler")),Schema_1=require("./Schema"),utils_1=require("../../utils"),Example_1=require("./Example"),MediaTypeModel=function(){function e(e,i,a,t,l,s){var r=void 0===s?{}:s,o=r.operation,n=r.type,p=r.response;Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isRequestType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onlyRequiredInSamples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i,this.operation=o,this.isRequestType=a,this.schema=t.schema&&new Schema_1.SchemaModel(e,t.schema,"",l,void 0,void 0,{operation:o,type:n,response:p}),this.onlyRequiredInSamples=l.onlyRequiredInSamples,void 0!==t.examples?this.examples=(0,utils_1.mapValues)(t.examples,(function(a){return new Example_1.ExampleModel(e,a,i,t.encoding)})):void 0!==t.example?this.examples={default:new Example_1.ExampleModel(e,{value:e.shallowDeref(t.example)},i,t.encoding)}:(0,utils_1.isJsonLike)(i)&&this.generateExample(e,t)}return Object.defineProperty(e.prototype,"generateExample",{enumerable:!1,configurable:!0,writable:!0,value:function(e,i){var a={skipReadOnly:this.isRequestType,skipWriteOnly:!this.isRequestType,skipNonRequired:this.isRequestType&&this.onlyRequiredInSamples,maxSampleDepth:this.options.generatedPayloadSamplesMaxDepth};if(this.schema&&this.schema.oneOf){this.examples={};for(var t=0,l=this.schema.oneOf;t<l.length;t++){var s=l[t],r=Sampler.sample(s.rawSchema,a,e.definition);this.schema.discriminatorProp&&"object"==typeof r&&r&&(r[this.schema.discriminatorProp]=s.title),this.examples[s.title]=new Example_1.ExampleModel(e,{value:r},this.name,i.encoding)}}else this.schema&&(this.examples={default:new Example_1.ExampleModel(e,{value:Sampler.sample(i.schema,a,e.definition)},this.name,i.encoding)})}}),e}();exports.MediaTypeModel=MediaTypeModel;
//# sourceMappingURL=MediaType.js.map