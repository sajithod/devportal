"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FieldDetails=void 0;var tslib_1=require("tslib"),React=(0,tslib_1.__importStar)(require("react")),fields_1=require("../../common-elements/fields"),utils_1=require("../../utils"),ExternalDocumentation_1=require("../ExternalDocumentation/ExternalDocumentation"),Markdown_1=require("../Markdown/Markdown"),EnumValues_1=require("./EnumValues"),Extensions_1=require("./Extensions"),FieldContstraints_1=require("./FieldContstraints"),FieldDetail_1=require("./FieldDetail"),common_elements_1=require("../../common-elements/"),Labels_1=require("../../services/Labels"),OptionsProvider_1=require("../OptionsProvider"),styled_components_1=(0,tslib_1.__importStar)(require("../../styled-components")),MAX_PATTERN_LENGTH=45,FieldDetails=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return Object.defineProperty(t,"state",{enumerable:!0,configurable:!0,writable:!0,value:{patternShown:!1}}),Object.defineProperty(t,"togglePattern",{enumerable:!0,configurable:!0,writable:!0,value:function(){t.setState({patternShown:!t.state.patternShown})}}),t}return(0,tslib_1.__extends)(t,e),Object.defineProperty(t.prototype,"render",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.props,t=e.showExamples,l=e.field,n=e.renderDiscriminatorSwitch,a=this.state.patternShown,i=this.context,r=i.enumSkipQuotes,s=i.hideSchemaTitles,c=i.hideSchemaPattern,m=l.schema,o=l.description,p=l.example,u=l.deprecated,_=l.examples,d=!!r||"header"===l.in,b=null;if(t&&(void 0!==p||void 0!==_))if(void 0!==_)b=React.createElement(Examples,{field:l});else{var E=(0,Labels_1.l)("example")+":",f=!!l.in;b=React.createElement(FieldDetail_1.FieldDetail,{label:E,value:getSerializedValue(l,l.example),raw:f})}return React.createElement("div",null,React.createElement(TypeWrapper,null,React.createElement(fields_1.TypePrefix,null,m.typePrefix),React.createElement(fields_1.TypeName,null,m.displayType),m.displayFormat&&React.createElement(fields_1.TypeFormat,null," ","<",m.displayFormat,">"," "),m.contentEncoding&&React.createElement(fields_1.TypeFormat,null," ","<",m.contentEncoding,">"," "),m.contentMediaType&&React.createElement(fields_1.TypeFormat,null," ","<",m.contentMediaType,">"," "),m.title&&!s&&React.createElement(fields_1.TypeTitle,null," (",m.title,") "),React.createElement(FieldContstraints_1.ConstraintsView,{constraints:m.constraints}),m.pattern&&!c&&React.createElement(React.Fragment,null,React.createElement(fields_1.PatternLabel,null,a||m.pattern.length<MAX_PATTERN_LENGTH?m.pattern:m.pattern.substr(0,MAX_PATTERN_LENGTH)+"..."),m.pattern.length>MAX_PATTERN_LENGTH&&React.createElement(fields_1.ToggleButton,{onClick:this.togglePattern},a?"Hide pattern":"Show pattern")),m.isCircular&&React.createElement(fields_1.RecursiveLabel,null," ",(0,Labels_1.l)("recursive")," ")),u&&React.createElement("div",null,React.createElement(common_elements_1.Badge,{type:"warning",style:{marginLeft:0}}," ",(0,Labels_1.l)("deprecated")," ")),React.createElement(FieldDetail_1.FieldDetail,{raw:d,label:(0,Labels_1.l)("default")+":",value:m.default}),React.createElement("div",null,React.createElement(Markdown_1.Markdown,{compact:!0,source:o})),!n&&React.createElement(EnumValues_1.EnumValues,{type:m.type,values:m["x-enumDescriptions"]||m.enum})," ",b,React.createElement(Extensions_1.Extensions,{extensions:(0,tslib_1.__assign)((0,tslib_1.__assign)({},l.extensions),m.extensions)}),m.externalDocs&&React.createElement(ExternalDocumentation_1.ExternalDocumentation,{externalDocs:m.externalDocs,compact:!0}),n&&n(this.props)||null,l.const&&React.createElement(FieldDetail_1.FieldDetail,{label:(0,Labels_1.l)("const")+":",value:l.const})||null)}}),Object.defineProperty(t,"contextType",{enumerable:!0,configurable:!0,writable:!0,value:OptionsProvider_1.OptionsContext}),t}(React.PureComponent);function Examples(e){var t=e.field;return t.examples?React.createElement(React.Fragment,null,React.createElement(fields_1.FieldLabel,null," ",(0,Labels_1.l)("examples"),": "),React.createElement(ExamplesList,null,Object.entries(t.examples).map((function(e){var l=e[0],n=e[1];return React.createElement(ExampleWrap,{key:l},React.createElement(ExampleSummary,null,n.summary||l," "),n.description&&React.createElement(ExampleDescription,null,n.description," "),React.createElement(fields_1.ExampleValue,null,getSerializedValue(t,n.value)))})))):null}function getSerializedValue(e,t){return e.in?decodeURIComponent((0,utils_1.serializeParameterValue)(e,t)):t}exports.FieldDetails=FieldDetails;var templateObject_1,templateObject_2,templateObject_3,templateObject_4,templateObject_5,ExampleDescription=styled_components_1.default.div(templateObject_1||(templateObject_1=(0,tslib_1.__makeTemplateObject)([""],[""]))),ExampleSummary=styled_components_1.default.label(templateObject_2||(templateObject_2=(0,tslib_1.__makeTemplateObject)(["\n  display: block;\n  font-size: inherit;\n  margin-bottom: 0.2em;\n  font-weight: ",";\n"],["\n  display: block;\n  font-size: inherit;\n  margin-bottom: 0.2em;\n  font-weight: ",";\n"])),(function(e){return e.theme.typography.fontWeightBold})),ExampleWrap=styled_components_1.default.div(templateObject_3||(templateObject_3=(0,tslib_1.__makeTemplateObject)(["\n  margin-top: 1em;\n  ","\n"],["\n  margin-top: 1em;\n  ","\n"])),(function(e){var t=e.theme;return(0,styled_components_1.mediaCSS)({fontSize:t.typography.fieldName.fontSize})})),ExamplesList=styled_components_1.default.div(templateObject_4||(templateObject_4=(0,tslib_1.__makeTemplateObject)(["\n  padding-left: 1.5em;\n  margin-bottom: 1em;\n"],["\n  padding-left: 1.5em;\n  margin-bottom: 1em;\n"]))),TypeWrapper=styled_components_1.default.div(templateObject_5||(templateObject_5=(0,tslib_1.__makeTemplateObject)(["\n  line-height: 20px;\n"],["\n  line-height: 20px;\n"])));
//# sourceMappingURL=FieldDetails.js.map