"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SeparatorLine=exports.MenuItemPath=exports.MenuItem=exports.MenuExternalLink=void 0;var tslib_1=require("tslib"),mobx_react_1=require("mobx-react"),React=(0,tslib_1.__importStar)(require("react")),icons_1=require("../../common-elements/icons"),openapi_1=require("../../utils/openapi"),MenuItems_1=require("./MenuItems"),styled_elements_1=require("./styled.elements"),OptionsProvider_1=require("../OptionsProvider"),styled_components_1=(0,tslib_1.__importDefault)(require("../../styled-components")),Labels_1=require("../../services/Labels"),linkify_1=require("../../common-elements/linkify");function preventDefaultIfNotForced(e){e.defaultPrevented||(0,linkify_1.userIsForcingNavigation)(e)||e.preventDefault()}exports.MenuExternalLink=(0,mobx_react_1.observer)((function(e){var t=e.link;return React.createElement(React.Fragment,null,isSeparator(t)?t.separator?React.createElement(styled_elements_1.MenuItemLabel,{depth:0,active:!1},t.separator):null:React.createElement(styled_elements_1.MenuItemLi,{depth:1},React.createElement(styled_elements_1.MenuItemLink,{href:t.link,target:t.target,active:!1,depth:1},React.createElement(styled_elements_1.MenuItemTitle,{title:t.label},t.label))),t.separatorLine?React.createElement(exports.SeparatorLine,null):null)}));var MenuItemLinkOrLabel=React.forwardRef((function(e,t){var n=e.href,a=e.children,r=(0,tslib_1.__rest)(e,["href","children"]);return n?React.createElement(styled_elements_1.MenuItemLink,(0,tslib_1.__assign)({href:n,onClick:preventDefaultIfNotForced},r,{ref:t}),a):React.createElement(styled_elements_1.MenuItemLabel,(0,tslib_1.__assign)({},r,{ref:t}),a)})),MenuItemOperationLinkOrLabel=(0,styled_components_1.default)(MenuItemLinkOrLabel)(templateObject_1||(templateObject_1=(0,tslib_1.__makeTemplateObject)(["\n  flex-wrap: wrap;\n"],["\n  flex-wrap: wrap;\n"])));exports.MenuItem=(0,mobx_react_1.observer)((function(e){var t=e.item,n=e.withoutChildren,a=e.onActivate,r=React.createRef(),i=React.useState(!1),l=i[0],c=i[1],o=React.useState("group"===t.type&&t.expanded),s=o[0],m=o[1];React.useEffect((function(){c(t.active)}),[t.active]),React.useEffect((function(){m(t.expanded)}),[t.expanded]);var p=React.useCallback((function(e){(0,linkify_1.userIsForcingNavigation)(e)||(null==a||a(t,e),e.stopPropagation())}),[a,t]);return React.useEffect((function(){e.item.active&&r.current&&r.current.scrollIntoViewIfNeeded()}),[e.item,e.item.active,r]),React.createElement(styled_elements_1.MenuItemLi,{onClick:p,depth:t.depth,"data-item-id":t.id},"operation"===t.type?React.createElement(OperationItemContent,(0,tslib_1.__assign)({},e,{item:t,ref:r})):React.createElement(MenuItemLinkOrLabel,{depth:t.depth,active:l,type:t.type,ref:r,href:t.href,hasChildren:t.items&&t.items.length>0},t.depth>0&&t.items.length>0&&React.createElement(icons_1.ShelfIcon,{direction:s?"down":"right"})||null,React.createElement(styled_elements_1.MenuItemTitle,{title:t.name},t.name,e.children)),!n&&t.items&&t.items.length>0&&React.createElement(MenuItems_1.MenuItems,{expanded:s,items:t.items,onActivate:a}))}));var OperationItemContent=(0,mobx_react_1.observer)(React.forwardRef((function(e,t){var n,a,r=e.item;return"path-first"!==React.useContext(OptionsProvider_1.OptionsContext).sideNavStyle&&!r.search||"operation"!==r.type?(n=r.name,a=null):(n=React.createElement(exports.MenuItemPath,{title:r.path}," ",r.path," "),a=React.createElement(MenuItemDescription,null," ",r.name," ")),React.createElement(MenuItemOperationLinkOrLabel,{depth:r.depth,active:r.active,deprecated:r.deprecated,ref:t,href:r.href},r.isWebhook?React.createElement(styled_elements_1.OperationBadge,{type:"hook"},(0,Labels_1.l)("webhook")):React.createElement(styled_elements_1.OperationBadge,{type:r.httpVerb},(0,openapi_1.shortenHTTPVerb)(r.httpVerb)),React.createElement(styled_elements_1.MenuItemTitle,{width:"calc(100% - 42px)"},n,e.children),a)})));function isSeparator(e){return null!=e.separator||!!e.separatorLine&&!e.link}exports.MenuItemPath=styled_components_1.default.code(templateObject_2||(templateObject_2=(0,tslib_1.__makeTemplateObject)(["\n  line-height: 1.4;\n  display: inline-block;\n  margin-bottom: 5px;\n  ","\n"],["\n  line-height: 1.4;\n  display: inline-block;\n  margin-bottom: 5px;\n  ","\n"])),(function(e){var t;return(null===(t=e.theme.sidebar)||void 0===t?void 0:t.breakPath)?"word-break: break-all":""}));var templateObject_1,templateObject_2,templateObject_3,templateObject_4,MenuItemDescription=styled_components_1.default.small(templateObject_3||(templateObject_3=(0,tslib_1.__makeTemplateObject)(["\n  display: block;\n  font-size: 0.87em;\n  line-height: 1.2;\n"],["\n  display: block;\n  font-size: 0.87em;\n  line-height: 1.2;\n"])));exports.SeparatorLine=styled_components_1.default.span(templateObject_4||(templateObject_4=(0,tslib_1.__makeTemplateObject)(["\n  display: block;\n  width: 100%;\n  height: 1px;\n  background-color: ",";\n  margin: ","px 0;\n"],["\n  display: block;\n  width: 100%;\n  height: 1px;\n  background-color: ",";\n  margin: ","px 0;\n"])),(function(e){return e.theme.sidebar.separatorLineColor}),(function(e){return e.theme.sidebar.spacing.paddingVertical}));
//# sourceMappingURL=MenuItem.js.map