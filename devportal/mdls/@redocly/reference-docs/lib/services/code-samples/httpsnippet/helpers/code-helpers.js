"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.printUrlVariablesDeclarations=exports.buildUrlExpression=exports.parseUrlIntoOperands=exports.addIndentation=exports.getPreserveTransformer=void 0;var tslib_1=require("tslib"),constants_1=require("./constants");function getPreserveTransformer(r){var e=r.body,n=r.authorizationHeader;return function(r,t,a){return e&&"body"===t&&"string"==typeof r.body?r.body:n&&"Authorization"===t&&"string"==typeof r.Authorization?r.Authorization:a}}function addIndentation(r,e){var n=void 0===e?{}:e,t=n.level,a=void 0===t?0:t,i=n.indent,s=void 0===i?"  ":i,o=n.firstLine,l=void 0===o||o,p=s.repeat(a),d=r.replace(/(\r\n|\n|\r)/gm,"\n"+p);return l?p.concat(d):d}function parseUrlIntoOperands(r,e){for(var n=Object.keys(e).map((function(e){return{name:e,idx:r.indexOf("{"+e+"}")}})).filter((function(r){return r.idx>-1})).sort((function(r,e){return r.idx-e.idx})),t=[],a=0,i=0,s=n;i<s.length;i++){var o=s[i],l=o.name,p=o.idx;p>a&&t.push({type:"string",value:r.substring(a,p)}),t.push({type:"variable",name:l}),a=p+l.length+2}return a<r.length&&t.push({type:"string",value:r.substring(a)}),t}function buildUrlExpression(r,e){var n=e.langOptions,t=n.joinSymbol,a=n.variableWrapperFn,i=n.stringLiteral,s=n.urlFieldName,o=n.rawName,l=r.pathParameters,p=void 0===l?{}:l,d=r.serverVariables,u=void 0===d?{}:d,v=(0,tslib_1.__assign)((0,tslib_1.__assign)({},p),u);return parseUrlIntoOperands(r[s]||"",v).map((function(r){if("variable"===r.type){var n=v[r.name],t=o?r.name:e.var(r.name,constants_1.VariableType.PATH);return a(t,n)}return i(r.value)})).join(t)}function printUrlVariablesDeclarations(r,e,n){var t=r.pathParameters,a=void 0===t?{}:t,i=r.serverVariables,s=void 0===i?{}:i;Object.entries((0,tslib_1.__assign)((0,tslib_1.__assign)({},a),s)).forEach((function(r){var t=r[0],a=r[1]||"YOUR_"+t+"_PARAMETER",i=e.var(t,constants_1.VariableType.PATH);void 0!==n?e.push(n,e.langOptions.variableDeclaration(i),a):e.push(e.langOptions.variableDeclaration(i),a)}))}exports.getPreserveTransformer=getPreserveTransformer,exports.addIndentation=addIndentation,exports.parseUrlIntoOperands=parseUrlIntoOperands,exports.buildUrlExpression=buildUrlExpression,exports.printUrlVariablesDeclarations=printUrlVariablesDeclarations;
//# sourceMappingURL=code-helpers.js.map