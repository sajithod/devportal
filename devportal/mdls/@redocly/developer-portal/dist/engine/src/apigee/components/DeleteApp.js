import*as React from"react";import{Alert,H3,Flex,Typography}from"../../ui";import{SimpleButton,StyledButton}from"./common-elements/styled.elements";import Dialog from"./common-elements/Dialog";import{navigate}from"@reach/router";import{APIClientContext}from"../services/APIClientProvider";import{QUERY_KEY_APPS}from"../services/config";import CircularProgress from"./common-elements/CircularProgress";import{useMutation,useQueryClient}from"react-query";export default function DeleteApp(a){const{apiClient:b}=React.useContext(APIClientContext),c=useQueryClient(),{appName:d}=a,[e,f]=React.useState(!1),g=()=>f(!0),h=()=>f(!1),{isLoading:i,error:j,mutateAsync:k}=useMutation(()=>b.deleteDeveloperApp(d),{onSuccess:()=>{c.invalidateQueries(QUERY_KEY_APPS)}});return React.createElement(React.Fragment,null,React.createElement(SimpleButton,{onClick:g},"Delete"),React.createElement(Dialog,{open:e,onOpen:g,onClose:h},React.createElement(React.Fragment,null,React.createElement(H3,{mt:"0",mb:"0"},"Delete app"),React.createElement(Typography,{mt:"0.5em"},"Do you really want to delete this app?"),j&&React.createElement(Alert,{variant:"danger",content:j.message}),React.createElement(Flex,{mt:"2em",justifyContent:"flex-end"},React.createElement(StyledButton,{onClick:h},"Cancel"),React.createElement(StyledButton,{color:"primary",onClick:async()=>{await k(),navigate("/apps/")},disabled:i},i&&React.createElement(CircularProgress,{size:18}),"Delete app")))))}