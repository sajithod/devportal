import*as React from"react";import{navigate}from"gatsby";import UserMenuItem from"../UserComponents/MenuItem";import{appTheme}from"../../appTheme";import{DrilldownMenu,ButtonBack,DrilldownMenuWrapper,SeparatorLine}from"../UserComponents/styled.elements";import{DrilldownMenuItem}from"../UserComponents/styled.elements";export class MenuItem extends React.PureComponent{constructor(a){super(a),this.handleChange=()=>{const{item:a,isAlwaysExpanded:b,activeItem:c}=this.props,d=a.items.map(({link:a})=>a);0<a.items.length&&a.link&&"drilldown"!==a.menuStyle&&a.link!==location.pathname&&d.find(a=>a===location.pathname||a===location.pathname+"/")||(!this.state.isExpanded&&a.selectFirstItemOnExpand&&a.items[0].link&&navigate(a.items[0].link),("drilldown"===a.menuStyle||!b)&&(this.setState({isExpanded:!this.state.isExpanded}),"drilldown"===a.menuStyle&&this.setState({prevActiveItem:c})))},this.handleBack=()=>{this.setState({isExpanded:!this.state.isExpanded}),this.state.prevActiveItem&&navigate(this.state.prevActiveItem.link||"")},this.state={isExpanded:a.item.hasActiveSubItem||"true"===a.item.expanded||"always"===a.item.expanded&&"drilldown"!==a.item.menuStyle,prevActiveItem:a.firstSiblingItem}}componentDidUpdate(a){(a.item.hasActiveSubItem!==this.props.item.hasActiveSubItem||this.props.item.expanded!==a.item.expanded)&&this.setState({isExpanded:this.props.item.hasActiveSubItem||"true"===this.props.item.expanded||"always"===this.props.item.expanded&&"drilldown"!==this.props.item.menuStyle})}render(){const{children:a,item:{items:c,icon:d,label:e,sublabel:f,separatorLine:g},item:b}=this.props,{isExpanded:h,prevActiveItem:i}=this.state,j=c&&0<c.length,k="always"===this.props.item.expanded;return React.createElement(React.Fragment,null,React.createElement(UserMenuItem,Object.assign({},this.props,{isAlwaysExpanded:k,onClick:this.handleChange,isExpanded:h})),j&&h&&React.createElement(React.Fragment,null,"drilldown"===b.menuStyle?React.createElement(DrilldownMenu,null,React.createElement("div",null,React.createElement(DrilldownMenuWrapper,null,React.createElement(ButtonBack,{onClick:this.handleBack},React.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10",width:"12px",height:"10px"},React.createElement("path",{d:"M2.414 5l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L2.414 5z",fill:appTheme.sidebar.caretColor}),React.createElement("path",{d:"M2 5a1 1 0 011-1h8a1 1 0 110 2H3a1 1 0 01-1-1z",fill:appTheme.sidebar.caretColor})),i?.label||"Back"),React.createElement(DrilldownMenuItem,{icon:d,label:e,sublabel:f})),a)):a),g&&React.createElement(SeparatorLine,null))}}